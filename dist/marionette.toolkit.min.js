!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("backbone"),require("jquery"),require("backbone.marionette"),require("underscore")):"function"==typeof define&&define.amd?define(["backbone","jquery","backbone.marionette","underscore"],e):t.Toolkit=e(t.Backbone,t.$,t.Marionette,t._)}(this,function(t,e,i,s){"use strict";var n=i.Object.extend({StateModel:t.Model,constructor:function(t){t=t||{};var e=t.StateModel||this.StateModel;this._stateModel=new e,this.bindEntityEvents(this._stateModel,this.getOption("stateEvents")),i.Object.call(this,t)},setState:function(){return this._stateModel.set.apply(this._stateModel,arguments)},getState:function(t){return t?this._stateModel.get.apply(this._stateModel,arguments):this._stateModel},destroy:function(){this._stateModel.stopListening(),i.Object.prototype.destroy.apply(this,arguments)}}),o=n.extend({constructor:function(t){s.bindAll(this,"start","stop"),this._apps={},s.extend(this,s.pick(t,["startWithParent","stopWithParent","apps"])),this.addApps(this.getOption("apps")),this._initializeApps(),n.call(this,t)},_isRunning:!1,_isDestroyed:!1,startWithParent:!1,stopWithParent:!0,_ensureSubappIsIntact:function(){if(this._isDestroyed)throw new i.Error({name:"SubappDestroyedError",message:"Subapp has already been destroyed and cannot be used."})},start:function(t){this._ensureSubappIsIntact(),this._isRunning||(this.triggerMethod("before:start",t),this._isRunning=!0,this.startApps(),this.triggerMethod("start",t))},stop:function(t){this._isRunning&&(this.triggerMethod("before:stop",t),this._isRunning=!1,this.stopApps(),this.triggerMethod("stop",t))},addApp:function(t,e,i){var s=this._apps[t]=new e(i);return this._isRunning&&s.getOption("startWithParent")&&s.start(),s},getApp:function(t){return this._apps[t]},destroyApp:function(t){s.isString(t)&&(t=this.getApp(t)),t&&t.destroy()},addApps:function(t){s.each(t,function(t,e){this.addApp(e,t)})},_initializeApps:function(){},startApps:function(){},stopApps:function(){s.each(this._apps,this.stopApp)},isRunning:function(){return this._isRunning},isDestroyed:function(){return this._isDestroyed},destroy:function(){this.stop(),this.destroyApps(),this._isDestroyed=!0,n.prototype.destroy.apply(this,arguments)}}),r=n.extend({constructor:function(t,e){e=e||{},s.extend(this,s.pick(e,["viewEventPrefix","viewClass","viewOptions","region"])),i.StateObject.call(this,e),this._setStateDefaults(t)},_shouldDestroy:!0,_setStateDefaults:function(t){s.defaults(t,s.result(this,"defaults")),this.setState(t,{silent:!0})},viewEventPrefix:"view",viewClass:i.ItemView,viewOptions:{},showIn:function(t){t&&(this.region=t),this.show()},show:function(){if(this._isShown)throw new i.Error({name:"ComponentShowError",message:"Component has already been shown in a region."});if(!this.region)throw new i.Error({name:"ComponentRegionError",message:"Component has no defined region."});this.listenTo(this.region,"empty",this.destroy),this.triggerMethod("before:show"),this.renderView(),this._isShown=!0,this.triggerMethod("show")},renderView:function(){this.view=this.buildView(),this._proxyViewEvents(),this.triggerMethod("before:render:view",this.view),this._shouldDestroy=!1,this.region.show(this.view),this._shouldDestroy=!0,this.triggerMethod("render:view",this.view)},_proxyViewEvents:function(){var t=this.getOption("viewEventPrefix");this.view.on("all",function(){var e=s.toArray(arguments),i=e[0];e[0]=t+":"+i,e.splice(1,0,this.view),this.triggerMethod.apply(this,e)},this)},mixinOptions:function(t){return s.extend({model:this.getState()},this.viewOptions,t)},buildView:function(){return new this.viewClass(this.mixinOptions())},_destroy:function(){i.StateObject.prototype.destroy.apply(this,arguments),this.region.empty()},destroy:function(){return this._shouldDestroy&&this._destroy(),this}});t.$=e;var h=i.Toolkit={};h.StateClass=n,h.Subapp=o,h.Component=r;var a=h;return a});
//# sourceMappingURL=marionette.toolkit.min.js.map